class FullHeightSlider{constructor(e={}){this.onNextSlide=e.onNextSlide?e.onNextSlide:void 0,this.onPrevSlide=e.onPrevSlide?e.onPrevSlide:void 0,this.onChangeSlide=e.onChangeSlide?e.onChangeSlide:void 0,this.onLeave=e.onLeave?e.onLeave:void 0,this.freezeTime=e.freezeTime?e.freezeTime:1500,this.container=document.querySelector("#fullscreen-slide-container"),this.slides=this.container.querySelectorAll(".fullscreen-slide"),this.nav=this.container.querySelector(".fullscreen-slider-nav"),this.navDots=[],this.active=0,this.freeze=!1,this.touchStart=!1,this.touchPosStart,this.lastTouchPos,this.unlock=!1,this.isAtBottom=!1,this.handleWheel=this.handleWheel.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.handleScroll=this.handleScroll.bind(this),this.handleKey=this.handleKey.bind(this)}init(){"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),document.addEventListener("wheel",this.handleWheel,{passive:!1}),this.container.addEventListener("touchstart",this.handleTouchStart,{passive:!1}),window.addEventListener("scroll",this.handleScroll,{passive:!1}),document.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("keydown",this.handleKey),this.slides[this.active].classList.add("active"),this.createNavigation()}handleTouchStart(e){(window.scrollY||window.pageYOffset)>5||(this.active!==this.slides.length-1||this.isAtBottom||(this.isAtBottom=!0,this.unlock=!0,setTimeout(function(){this.unlock=!1}.bind(this),this.freezeTime)),this.unlock||(e.target.matches("a, button, a>*")||e.preventDefault(),this.touchStart=!0,this.touchPosStart=e.touches[0].clientY,this.lastTouchPos=e.touches[0].clientY,this.isAtBottom=!1))}handleTouchMove(e){!this.unlock&&this.active!==this.slides.length-1&&e.preventDefault(),this.lastTouchPos=e.touches[0].clientY}handleTouchEnd(e){this.active===this.slides.length-1&&this.onLeave&&this.onLeave(),this.touchStart&&(this.active!==this.slides.length-1&&this.lastTouchPos-this.touchPosStart<-50?this.freeze||this.nextSlide():0!==this.active&&this.lastTouchPos-this.touchPosStart>50&&(this.freeze||this.prevSlide()),this.touchStart=!1)}handleWheel(e){(window.scrollY||window.pageYOffset)>5?this.onLeave&&this.onLeave():this.freeze?e.preventDefault():this.active!==this.slides.length-1&&e.deltaY>0?(e.preventDefault(),this.freeze||this.nextSlide()):0!==this.active&&e.deltaY<0&&(e.preventDefault(),this.freeze||this.prevSlide())}handleScroll(e){!this.unlock&&this.active!==this.slides.length-1&&(e.preventDefault(),e.stopPropagation(),window.scrollTo(0,0))}handleKey(e){this.freeze?e.preventDefault():("ArrowDown"===e.key&&this.active!==this.slides.length-1&&(e.preventDefault(),this.nextSlide()),"ArrowUp"===e.key&&0!==this.active&&(window.scrollY||window.pageYOffset)<5&&(e.preventDefault(),this.prevSlide()))}nextSlide(){this.changeSlide(1),this.onNextSlide&&this.onNextSlide(this.active)}prevSlide(){this.changeSlide(-1),this.onPrevSlide&&this.onPrevSlide(this.active)}changeSlide(e){this.freeze=!0;let t=e>0?"fadeInUp":"fadeInDown",i=e>0?"fadeOutUp":"fadeOutDown";this.slides[this.active].classList.remove("active"),this.slides[this.active].classList.add(i),this.navDots[this.active].classList.remove("active"),this.active+=e,this.slides[this.active].classList.add("active",t),this.navDots[this.active].classList.add("active");setTimeout(function(){this.slides[this.active].classList.remove(t),this.slides[this.active-e].classList.remove(i),this.freeze=!1}.bind(this),this.freezeTime),this.onChangeSlide&&this.onChangeSlide(this.active)}jumpToSlide(e){const t=e-this.active;this.changeSlide(t)}createNavigation(){this.slides.forEach(((e,t)=>{const i=document.createElement("div");i.classList.add("nav-dot"),t===this.active&&i.classList.add("active"),i.addEventListener("click",(()=>{this.freeze||this.jumpToSlide(t)})),this.navDots[t]=i,this.nav.appendChild(i)}))}}const slider=new FullHeightSlider;slider.init();
